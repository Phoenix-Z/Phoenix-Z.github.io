<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Phoenix-Z的个人小站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Phoenix-Z的个人小站">
<meta property="og:url" content="https://phoenix-z.github.io/index.html">
<meta property="og:site_name" content="Phoenix-Z的个人小站">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Phoenix-Z的个人小站">
  
    <link rel="alternate" href="/atom.xml" title="Phoenix-Z的个人小站" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Phoenix-Z的个人小站</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://phoenix-z.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-adb常用命令" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/06/adb常用命令/" class="article-date">
  <time datetime="2019-01-06T09:22:32.000Z" itemprop="datePublished">2019-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/06/adb常用命令/">adb常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="调试相关"><a href="#调试相关" class="headerlink" title="调试相关"></a>调试相关</h2><ul>
<li><p>adb devices<br>列出所有连接的设备，包括AVD。</p>
</li>
<li><p>adb -s device-id command<br>多个设备情况下使用 -s参数指定对某个设备执行操作<br>设备的id(device-id)可以通过adb devices命令看到。 </p>
</li>
<li><p>adb -d commond<br>唯一连接到该PC端的真实安卓设备执行命令，如果发现USB中连接有多部设备，将会报错</p>
</li>
<li><p>adb -e command<br>让唯一连接到该PC端的模拟器执行命令，如果发现开启了多个模拟器，将会报错</p>
</li>
<li><p>adb remount<br>将system分区重新挂载为可读写分区，设备root情况下才有效 </p>
</li>
<li><p>adb reboot<br>重启设备</p>
<ul>
<li><p>abd reboot bootloader<br>重启设备到bootloader(刷机模式)</p>
</li>
<li><p>adb reboot recovery<br>重启设备到recovery模式(恢复模式)</p>
</li>
</ul>
</li>
</ul>
<h2 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h2><ul>
<li><p>adb push src(电脑端)  des(手机端)</p>
<p>将源文件或者源目录中的所有文件拷贝到目的目录中</p>
</li>
<li><p>adb pull src(手机端)  des(电脑端)​</p>
<p>将手机端的文件或者目录下的所有文件拷贝到电脑中</p>
</li>
</ul>
<h2 id="管理安装包"><a href="#管理安装包" class="headerlink" title="管理安装包"></a>管理安装包</h2><ul>
<li><p>adb install  [-r|-s]  xxx.apk</p>
<p>安装应用程序，-r参数表示覆盖安装(保留缓存和数据)，-s参数表示安装apk到sd卡上</p>
</li>
<li><p>adb uninstall  [-k] package</p>
<p>卸载应用程序，-k参数表示卸载时保留数据和缓存目录</p>
</li>
</ul>
<h2 id="网络相关"><a href="#网络相关" class="headerlink" title="网络相关"></a>网络相关</h2><ul>
<li><p>adb shell netstat</p>
<p>查看网络状态</p>
</li>
<li><p>adb connect host:port</p>
<p>通过tcp/ip连接，默认端口为5555</p>
</li>
<li><p>adb forward local remote</p>
<p>转发套接字连接</p>
</li>
</ul>
<h2 id="日志输出"><a href="#日志输出" class="headerlink" title="日志输出"></a>日志输出</h2><ul>
<li><p>adb logcat -s tag</p>
<p>查看指定tag日志</p>
</li>
<li><p>adb logcat -c</p>
<p>清除log缓存</p>
</li>
</ul>
<p>##adb shell</p>
<p>adb shell 提供了类似于linux shell的环境，在输入adb shell之后可以进入shell环境，在这个环境中可以执行任一linux命令。需要注意的是，当进入环境后行首的符号是$时，说明不是root身份，有些命令无法执行，此时只需要输入su命令即可切换到root，切换成功之后行首变为#。当然也可以不进入shell环境，直接执行adb shell + command也可以执行相应的操作。</p>
<p>比较常用的linux命令有：</p>
<p><strong>1. 调试相关</strong></p>
<ul>
<li><p>monkey  -v -p your.package.name 500</p>
<p>跑monkey测试稳定性(monkey是SDK中附带的一个工具,该工具主要用于进行压力测试),-v参数表示打印信息的详细级别,-p参数表示指定包名,500表示随机事件的次数。</p>
</li>
<li><p>ps</p>
<p>列出进程列表，其中包含进程的pid等信息。</p>
<ul>
<li><p>ps -x pid</p>
<p>查看指定进程信息。</p>
</li>
</ul>
</li>
<li><p>kill pid</p>
<p>杀掉指定进程。</p>
</li>
</ul>
<p><strong>2.启动Activity等</strong></p>
<ul>
<li><p>am</p>
<ul>
<li><p>am start -n package/package-activity</p>
<p><strong>启动应用</strong> ，-n指定包名、包名+启动类的类名，启动类的类名必须是完整路径。</p>
</li>
<li><p>am force-stop package</p>
<p><strong>停止应用</strong> </p>
</li>
<li><p>am startservice [options] <intent></intent></p>
<p><strong>启动service</strong> </p>
</li>
<li><p>am broadcast [options] <intent></intent></p>
<p><strong>发送广播</strong> </p>
</li>
</ul>
</li>
</ul>
<p><strong>3.管理安装包</strong></p>
<ul>
<li><p>pm </p>
<ul>
<li><p>pm list packages [options] <intent></intent></p>
<p>列举出所有包含<intent>的package</intent></p>
</li>
<li><p>pm list permissions</p>
<p>列出设备上的所有权限</p>
</li>
<li><p>pm list packages</p>
<p>列出设备上安装的所有app的包名</p>
</li>
<li><p>pm path packages</p>
<p>列出指定包名对应的apk路径</p>
</li>
<li><p>pm clear packages</p>
<p>清空指定包名对应的应用的数据和缓存文件，开发时很有用</p>
</li>
<li><p>pm list features</p>
<p>列出设备上所有的feature</p>
</li>
</ul>
</li>
</ul>
<p><strong>4.显示系统信息</strong></p>
<ul>
<li><p>getprop</p>
<p>获取系统属性，可以获取到一大堆关于系统的信息(键值对形式)，所以可以通过grep命令过滤出需要的信息，如：getprop | grep version</p>
</li>
<li><p>top</p>
<p>每隔一秒会刷新一次cpu和内存使用状况，具体参数使用：</p>
<ul>
<li>top -m 3 查看占用内存前3 的应用</li>
<li>top -n 3 刷新3次内存信息(不指定-n参数的话默认是每秒都会刷新一次数据)</li>
</ul>
</li>
<li><p>cat /proc/cpuinfo或者cat /proc/stat</p>
<p>可以查看系统当前cpu使用情况</p>
</li>
<li><p>cat /proc/meminfo </p>
<p>可以查看系统当前内存使用情况</p>
</li>
<li><p>dumpsys meminfo package </p>
<p>可以查看指定包名应用的内存使用情况，各项信息的具体说明</p>
</li>
<li><p>service list或者cat /system/build.prop </p>
<p>可以查看service</p>
</li>
<li><p>dumpsys power</p>
<p>查看电量管理信息，其中可以知道当前那个应用持有WAKE_LOCK锁</p>
</li>
<li><p>dumpsys battery</p>
<p>查看电量用量情况</p>
</li>
<li><p>dumpsys batterystats</p>
<p>查看电池使用日志，图形界面日志分析参考google提供的工具：</p>
<p><a href="https://github.com/google/battery-historian" target="_blank" rel="noopener">图形界面日志</a></p>
</li>
<li><p>screencap /sdcard/example.png</p>
<p>截图</p>
</li>
<li><p>screenrecord /sdcard/example.mp4</p>
<p>–size 指定录制的视频分辨率，比如设置为800x480</p>
<p>–bit-rate 设置视频采样bit率，默认为4Mbps</p>
<p>–time-limit 设置录制时间，单位为秒，默认为180秒</p>
<p>–verbose 录屏是电脑端屏显log，录完后还可以看到发出了广播</p>
</li>
</ul>
<p><strong>5.模拟按键</strong></p>
<ul>
<li><p>input</p>
<ul>
<li><p>input text “hello%sworld”</p>
<p>模拟输入文本，%s表示空格</p>
</li>
<li><p>input keyevent 82</p>
<p>模拟按键，82表示KEYCODE_MENU，即菜单键</p>
</li>
<li><p>input tab 100 200</p>
<p>模拟点击，屏幕上横纵坐标分别为100 120的位置(要查看具体坐标值，可以打开开发者选项-&gt;指针位置)</p>
</li>
<li><p>input swipe 0 1000 800 600</p>
<p>模拟滑动，从位置(0,1000)滑动到(800，600)</p>
</li>
<li><p>input swipe 100 200 100 200 500</p>
<p>模拟长按，在位置(100， 200)长按500毫秒</p>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://phoenix-z.github.io/2019/01/06/adb常用命令/" data-id="cjqkow96c0000ugv6rfms6twm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/06/adb常用命令/">adb常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Phoenix-Z<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>